<%- include("../../partials/header")%>

<br><br><br><br>
<div class="container">
	<div>
		<table class="table table-bordered">
		  <thead>
			<tr>
			  <th scope="col">Month</th>
			  <th scope="col">Year</th>
			  <th scope="col">Name</th>
			  <th scope="col">Code</th>
			<% if(currentUser) { %>
			  <th scope="col">Status</th>
			<% } %>
			</tr>
		  </thead>
		  <tbody>
			<% console.log(currentUser) %>
			<% var a=0 %>
			<% problems.forEach(function(problem){ %>
				<tr>
				<% console.log("ID is "+problem._id); %>
				<% if(currentUser) { %>
					<% var solved=currentUser.solved %>
					<% var flag=solved.indexOf(problem._id) %>
					<% if(flag!=-1) { %>
						<% console.log("I am in flag!=-1 " +flag); %>
				  		<th scope="row" style="background-color:Green;"><%= problem.month %></th>
				  		<td style="background-color:Green;"><%= problem.year %></td>
				  		<td style="background-color:Green"><a href="<%=problem.url%>"><%=problem.name%></a></td>
				  		<td style="background-color:Green"><a href="<%=problem.url%>"><%=problem.code%></a></td>
				  		<td>
					  		<form action="/challenge/div2prob1" method="POST">
						  		<input name="id" value="<%= problem._id %>" style="display:none">
								<input name="flag" value="0" style="display:none">
					  			<button class="btn btn-danger" id="undone<%=a%>">Undone</button>
					  		</form>
				  		</td>
					<%} else { %>
						<th scope="row" style="background-color:White"><%= problem.month %></th>
				  		<td style="background-color:White"><%= problem.year %></td>
				  		<td style="background-color:White"><a href="<%=problem.url%>"><%=problem.name%></a></td>
				  		<td style="background-color:White"><a href="<%=problem.url%>"><%=problem.code%></a></td>
				  		<td>
					  		<form action="/challenge/div2prob1" method="POST">
						  		<input name="id" value="<%= problem._id %>" style="display:none">
								<input name="flag" value="1" style="display:none">
					  			<button class="btn btn-success" id="done">Done</button>
					  		</form>
				  		</td>
					<%}%>
				<% } else { %>
					<th scope="row"><%= problem.month %></th>
					<td><%= problem.year %></td>
					<td><a href="<%=problem.url%>"><%=problem.name%></a></td>
					<td><a href="<%=problem.url%>"><%=problem.code%></a></td>
				<%}%>
				</tr>
			  <% a=a+1 %>
			<% }); %>
		  </tbody>
		</table>
	</div>
</div>

<%- include("../../partials/footer")%>